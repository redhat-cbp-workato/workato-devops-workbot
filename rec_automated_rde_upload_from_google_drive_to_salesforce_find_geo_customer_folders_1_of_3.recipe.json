{
  "name": "REC | Automated RDE Upload from Google Drive to Salesforce | Find Geo Customer Folders | 1 of 3",
  "description": "",
  "version": 7,
  "private": true,
  "concurrency": 1,
  "code": {
    "number": 0,
    "provider": "clock",
    "name": "scheduled_event",
    "as": "fac5dc02",
    "keyword": "trigger",
    "input": {
      "time_unit": "minutes",
      "trigger_every": "10"
    },
    "extended_input_schema": [
      {
        "control_type": "integer",
        "default": "5",
        "enforce_template_mode": true,
        "extends_schema": true,
        "hint": "Define repeating schedule. Enter whole numbers only.\n                        This field can be set to a minimum of 5 minutes.",
        "label": "Trigger every",
        "name": "trigger_every",
        "optional": false,
        "suffix": {
          "text": "minutes"
        },
        "type": "string"
      },
      {
        "control_type": "select",
        "hint": "Select the timezone to use. Leave it blank to use <b>{{authUser.account_timezone}}</b>",
        "label": "Timezone",
        "name": "timezone",
        "optional": true,
        "pick_list": "timezone_id_global_pick_list",
        "pick_list_connection_less": true,
        "type": "string"
      },
      {
        "control_type": "date_time",
        "enforce_template_mode": true,
        "extends_schema": true,
        "hint": "Set date and time to start or leave blank to start immediately. <b>Once recipe has been run or tested, value cannot be changed.</b>",
        "label": "Start after",
        "name": "start_after",
        "optional": true,
        "parse_output": "date_time_conversion",
        "since_field": true,
        "type": "date_time",
        "ignore_timezone": true,
        "render_input": "date_time_conversion"
      }
    ],
    "block": [
      {
        "number": 1,
        "keyword": "try",
        "input": {
        },
        "block": [
          {
            "number": 2,
            "provider": "workato_variable",
            "name": "declare_variable",
            "as": "3f378cb8",
            "keyword": "action",
            "input": {
              "variables": {
                "schema": "[{\"name\":\"last_run_time\",\"type\":\"date_time\",\"optional\":true,\"label\":\"last_run_time\",\"details\":{\"real_name\":\"last_run_time\"},\"control_type\":\"date_time\",\"parent\":[\"variables\",\"data\"]}]",
                "data": {
                  "last_run_time": "=_dp('{\"pill_type\":\"output\",\"provider\":\"clock\",\"line\":\"fac5dc02\",\"path\":[\"last_job_time\"]}').presence || 1.hour.ago"
                }
              }
            },
            "extended_output_schema": [
              {
                "control_type": "date_time",
                "label": "last_run_time",
                "name": "last_run_time",
                "optional": true,
                "parse_output": "date_time_conversion",
                "type": "date_time",
                "details": {
                  "real_name": "last_run_time"
                },
                "render_input": "date_time_conversion"
              }
            ],
            "extended_input_schema": [
              {
                "add_field_label": "Add a variable",
                "control_type": "form-schema-builder",
                "empty_schema_title": "Add variables by giving them a name, type and default value",
                "exclude_fields": [
                  "hint"
                ],
                "item_label": "variable",
                "label": "Variables",
                "mark_as_required": true,
                "name": "variables",
                "ngIf": "!input.name",
                "optional": true,
                "properties": [
                  {
                    "control_type": "text",
                    "label": "Schema",
                    "extends_schema": true,
                    "broadcast_change_event": true,
                    "type": "string",
                    "name": "schema"
                  },
                  {
                    "properties": [
                      {
                        "control_type": "date_time",
                        "label": "last_run_time",
                        "render_input": "date_time_conversion",
                        "parse_output": "date_time_conversion",
                        "name": "last_run_time",
                        "type": "date_time",
                        "optional": true,
                        "details": {
                          "real_name": "last_run_time"
                        },
                        "parent": [
                          "variables",
                          "data"
                        ],
                        "hint": "Defaults to nil if not supplied.",
                        "sticky": true
                      }
                    ],
                    "label": "Data",
                    "type": "object",
                    "name": "data"
                  }
                ],
                "type": "object"
              }
            ],
            "visible_config_fields": [
              "variables.data.last_run_time"
            ],
            "uuid": "1e63b687-6621-40c4-9446-e5e799f2d451"
          },
          {
            "number": 3,
            "provider": "google_drive",
            "name": "search_file_or_folder",
            "as": "f2c5734f",
            "keyword": "action",
            "dynamicPickListSelection": {
              "folderId": {
                "ids": [
                  "0AH9nVkMvJ1qrUk9PVA/0AH9nVkMvJ1qrUk9PVA",
                  "1xd8IyqNrlbAF6Djq1wxRkUtCbB09xxYy/0AH9nVkMvJ1qrUk9PVA"
                ],
                "titles": [
                  "RHSC Automated Data",
                  "Automated RDE Upload"
                ]
              }
            },
            "toggleCfg": {
              "folderId": true
            },
            "input": {
              "kind": "Files",
              "folderId": "1xd8IyqNrlbAF6Djq1wxRkUtCbB09xxYy/0AH9nVkMvJ1qrUk9PVA",
              "query": "mimeType = 'application/vnd.google-apps.shortcut' and trashed = false"
            },
            "uuid": "97b3269b-b836-4eea-a007-15e4454d7e37"
          },
          {
            "number": 4,
            "provider": "google_drive",
            "name": "__adhoc_http_action",
            "as": "f6090cf1",
            "keyword": "action",
            "input": {
              "mnemonic": "Get shortcut details",
              "verb": "get",
              "response_type": "json",
              "path": "files/#{_dp('{\"pill_type\":\"output\",\"provider\":\"google_drive\",\"line\":\"f2c5734f\",\"path\":[\"files\",{\"path_element_type\":\"current_item\"},\"id\"]}')}",
              "input": {
                "schema": "[{\"control_type\":\"text\",\"label\":\"fields\",\"optional\":true,\"details\":{\"real_name\":\"fields\"},\"sticky\":true,\"type\":\"string\",\"name\":\"fields\",\"parent\":[\"input\",\"data\"]},{\"name\":\"supportsAllDrives\",\"type\":\"string\",\"optional\":true,\"label\":\"supportsAllDrives\",\"details\":{\"real_name\":\"supportsAllDrives\"},\"control_type\":\"text\",\"parent\":[\"input\",\"data\"]}]",
                "data": {
                  "fields": "id,name,mimeType,shortcutDetails",
                  "supportsAllDrives": "true"
                }
              },
              "output": "[{\"control_type\":\"text\",\"label\":\"ID\",\"type\":\"string\",\"name\":\"id\"},{\"control_type\":\"text\",\"label\":\"Name\",\"type\":\"string\",\"name\":\"name\"},{\"control_type\":\"text\",\"label\":\"Mime type\",\"type\":\"string\",\"name\":\"mimeType\"},{\"properties\":[{\"control_type\":\"text\",\"label\":\"Target ID\",\"type\":\"string\",\"name\":\"targetId\"},{\"control_type\":\"text\",\"label\":\"Target mime type\",\"type\":\"string\",\"name\":\"targetMimeType\"}],\"label\":\"Shortcut details\",\"type\":\"object\",\"name\":\"shortcutDetails\"}]"
            },
            "extended_output_schema": [
              {
                "control_type": "text",
                "label": "ID",
                "name": "id",
                "optional": true,
                "type": "string"
              },
              {
                "control_type": "text",
                "label": "Name",
                "name": "name",
                "optional": true,
                "type": "string"
              },
              {
                "control_type": "text",
                "label": "Mime type",
                "name": "mimeType",
                "optional": true,
                "type": "string"
              },
              {
                "label": "Shortcut details",
                "name": "shortcutDetails",
                "optional": true,
                "properties": [
                  {
                    "control_type": "text",
                    "label": "Target ID",
                    "optional": true,
                    "type": "string",
                    "name": "targetId"
                  },
                  {
                    "control_type": "text",
                    "label": "Target mime type",
                    "optional": true,
                    "type": "string",
                    "name": "targetMimeType"
                  }
                ],
                "type": "object"
              }
            ],
            "extended_input_schema": [
              {
                "control_type": "text",
                "hint": "Base URI is <b>https://www.googleapis.com/drive/v3/</b> - path will be appended to this URI. Use absolute URI to override this base URI.",
                "label": "Path",
                "name": "path",
                "optional": false,
                "type": "string"
              },
              {
                "control_type": "select",
                "default": "json",
                "extends_schema": true,
                "label": "Response type",
                "name": "response_type",
                "optional": true,
                "pick_list": [
                  [
                    "JSON response",
                    "json"
                  ],
                  [
                    "Raw JSON Response",
                    "raw"
                  ],
                  [
                    "XML Response",
                    "xml2"
                  ],
                  [
                    "Raw response",
                    "text"
                  ]
                ],
                "sticky": false,
                "type": "string"
              },
              {
                "add_field_label": "Add URL parameter",
                "control_type": "form-schema-builder",
                "label": "Request URL parameters",
                "name": "input",
                "optional": true,
                "properties": [
                  {
                    "control_type": "text",
                    "label": "Schema",
                    "extends_schema": true,
                    "sticky": true,
                    "optional": true,
                    "type": "string",
                    "name": "schema"
                  },
                  {
                    "properties": [
                      {
                        "control_type": "text",
                        "label": "fields",
                        "optional": true,
                        "details": {
                          "real_name": "fields"
                        },
                        "sticky": true,
                        "parent": [
                          "input",
                          "data"
                        ],
                        "type": "string",
                        "name": "fields"
                      },
                      {
                        "control_type": "text",
                        "label": "supportsAllDrives",
                        "optional": true,
                        "details": {
                          "real_name": "supportsAllDrives"
                        },
                        "parent": [
                          "input",
                          "data"
                        ],
                        "sticky": true,
                        "type": "string",
                        "name": "supportsAllDrives"
                      }
                    ],
                    "label": "Data",
                    "optional": true,
                    "type": "object",
                    "name": "data"
                  }
                ],
                "sticky": false,
                "type": "object"
              },
              {
                "control_type": "key_value",
                "empty_list_text": "Refer to the API documentation and add required headers to this HTTP request",
                "empty_list_title": "Does this HTTP request require headers?",
                "item_label": "Header",
                "label": "Request headers",
                "name": "request_headers",
                "of": "object",
                "optional": true,
                "properties": [
                  {
                    "control_type": "text",
                    "label": "Name",
                    "optional": true,
                    "type": "string",
                    "name": "name"
                  },
                  {
                    "control_type": "text",
                    "label": "Value",
                    "optional": true,
                    "type": "string",
                    "name": "value"
                  }
                ],
                "type": "array"
              },
              {
                "control_type": "schema-designer",
                "extends_schema": true,
                "label": "Response body",
                "name": "output",
                "optional": true,
                "sample_data_type": "json_http",
                "sticky": true,
                "type": "string",
                "schema_neutral": true
              },
              {
                "control_type": "schema-designer",
                "extends_schema": true,
                "label": "Response headers",
                "name": "response_headers",
                "optional": true,
                "sample_data_type": "json_http",
                "sticky": false,
                "type": "string",
                "schema_neutral": true
              },
              {
                "control_type": "checkbox",
                "label": "Inspect",
                "name": "inspect",
                "ngIf": "false",
                "optional": true,
                "parse_output": "float_conversion",
                "type": "number"
              }
            ],
            "visible_config_fields": [
              "mnemonic",
              "verb",
              "response_type",
              "input",
              "input.schema",
              "output",
              "input.data.field",
              "path",
              "input.data.supportsAllDrives",
              "input.data.fields"
            ],
            "uuid": "5b5b9df4-b4eb-4896-b280-18bf19d202e8",
            "wizardFinished": true
          },
          {
            "number": 5,
            "provider": "google_drive",
            "name": "search_file_or_folder",
            "as": "77317234",
            "keyword": "action",
            "toggleCfg": {
              "folderId": false
            },
            "input": {
              "kind": "Folders",
              "folderId": "#{_dp('{\"pill_type\":\"output\",\"provider\":\"google_drive\",\"line\":\"f6090cf1\",\"path\":[\"shortcutDetails\",\"targetId\"]}')}",
              "query": "'#{_dp('{\"pill_type\":\"output\",\"provider\":\"google_drive\",\"line\":\"f6090cf1\",\"path\":[\"shortcutDetails\",\"targetId\"]}')}' in parents and mimeType = 'application/vnd.google-apps.folder' and trashed = false"
            },
            "uuid": "0f00e127-f72b-4194-9595-342726a9aacb"
          },
          {
            "number": 6,
            "as": "17bb5f92",
            "keyword": "foreach",
            "repeat_mode": "simple",
            "clear_scope": "false",
            "input": {
            },
            "block": [
              {
                "number": 7,
                "provider": "workato_recipe_function",
                "name": "call_recipe_async",
                "as": "4ecc6349",
                "keyword": "action",
                "dynamicPickListSelection": {
                  "flow_id": "REC | Automated RDE Upload from Google Drive to Salesforce | Find Files or Shortcuts | 2 of 4"
                },
                "input": {
                  "flow_id": {
                    "zip_name": "rec_automated_rde_upload_from_google_drive_to_salesforce_find_opportunity_folders_2_of_3.recipe.json",
                    "name": "REC | Automated RDE Upload from Google Drive to Salesforce | Find Opportunity Folders | 2 of 3",
                    "folder": ""
                  },
                  "parameters": {
                    "last_run_time": "#{_dp('{\"pill_type\":\"output\",\"provider\":\"workato_variable\",\"line\":\"3f378cb8\",\"path\":[\"last_run_time\"]}')}",
                    "geo_customer_folder_id": "#{_dp('{\"pill_type\":\"output\",\"provider\":\"foreach\",\"line\":\"17bb5f92\",\"path\":[\"id\"]}')}"
                  }
                },
                "extended_input_schema": [
                  {
                    "label": "Parameters",
                    "name": "parameters",
                    "properties": [
                      {
                        "control_type": "text",
                        "label": "Geo Customer Folder ID",
                        "name": "geo_customer_folder_id",
                        "type": "string",
                        "optional": false
                      },
                      {
                        "control_type": "date_time",
                        "label": "last_run_time",
                        "render_input": "date_time_conversion",
                        "parse_output": "date_time_conversion",
                        "name": "last_run_time",
                        "type": "date_time",
                        "optional": false
                      }
                    ],
                    "type": "object"
                  }
                ],
                "uuid": "a8a76b55-07d3-4576-a9fd-5d9035f9ea6c"
              }
            ],
            "source": "#{_dp('{\"pill_type\":\"output\",\"provider\":\"google_drive\",\"line\":\"77317234\",\"path\":[\"files\"]}')}",
            "uuid": "74d37963-e72c-49ac-8f6c-173ae05c8218"
          },
          {
            "number": 8,
            "as": "6322ea40",
            "keyword": "catch",
            "input": {
              "max_retry_count": "0",
              "retry_interval": "2"
            },
            "block": [
              {
                "number": 9,
                "provider": "logger",
                "name": "log_message",
                "as": "ff679170",
                "keyword": "action",
                "input": {
                  "user_logs_enabled": "false",
                  "message": "#{_dp('{\"pill_type\":\"output\",\"provider\":\"catch\",\"line\":\"6322ea40\",\"path\":[\"line_number\"]}')}#{_dp('{\"pill_type\":\"output\",\"provider\":\"catch\",\"line\":\"6322ea40\",\"path\":[\"adapter\"]}')}#{_dp('{\"pill_type\":\"output\",\"provider\":\"catch\",\"line\":\"6322ea40\",\"path\":[\"action\"]}')}#{_dp('{\"pill_type\":\"output\",\"provider\":\"catch\",\"line\":\"6322ea40\",\"path\":[\"type\"]}')}#{_dp('{\"pill_type\":\"output\",\"provider\":\"catch\",\"line\":\"6322ea40\",\"path\":[\"message\"]}')}#{_dp('{\"pill_type\":\"output\",\"provider\":\"catch\",\"line\":\"6322ea40\",\"path\":[\"error_at\"]}')}"
                },
                "extended_input_schema": [
                  {
                    "control_type": "switch",
                    "default": false,
                    "disable_formula": true,
                    "extends_schema": true,
                    "hint": "                Send a copy of the message to Workato logs.\n                <a href=\"https://docs.workato.com/features/logging-service.html\" target=\"_blank\" class=\"ng-scope\">\n                  Learn more\n                </a>\n",
                    "label": "Send to Workato log service",
                    "name": "user_logs_enabled",
                    "optional": true,
                    "type": "string"
                  }
                ],
                "uuid": "c8c09a67-831d-4492-9de7-6fb22b9856d1"
              }
            ],
            "uuid": "1b046d3d-972e-4eba-98f8-9e985467e1ed"
          }
        ],
        "uuid": "d36af9c1-db84-4e5f-97e7-281a160a61be"
      }
    ],
    "uuid": "e354a336-4f72-4b19-b839-fede09997ce7"
  },
  "config": [
    {
      "keyword": "application",
      "provider": "clock",
      "skip_validation": false,
      "account_id": null
    },
    {
      "keyword": "application",
      "provider": "workato_variable",
      "skip_validation": false,
      "account_id": null
    },
    {
      "keyword": "application",
      "provider": "google_drive",
      "skip_validation": false,
      "account_id": {
        "zip_name": "busarchdrive.connection.json",
        "name": "BusArchDrive",
        "folder": ""
      }
    },
    {
      "keyword": "application",
      "provider": "workato_recipe_function",
      "skip_validation": false,
      "account_id": null
    },
    {
      "keyword": "application",
      "provider": "logger",
      "skip_validation": false,
      "account_id": null
    }
  ],
  "tags": [
    "RDE Upload M1"
  ]
}